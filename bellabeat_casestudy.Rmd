---
title: "Bellabeat Case Study"
author: "Vedanta Mohapatra"
date: '2022-03-07'
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
tinytex::install_tinytex()
```

## Introduction and Background

<center>
![Bellabeat](LTspiceXVII/bbl.png)
</center>


Bellabeat, a hightech wellness company that manufactures health-focussed products for women. It is a succesful small company but have the potential to be a big game player.

Their products include:

__1. Bellabeat app__: Provides users with their health data related to their activity, sleep and habits. The data helps users to understand their current habits and make healthy decisions.
                  
__2. Leaf__: A wellness tracker which is connected to the app to track activity, sleep and stess.

__3. Time__: This is a watch that combines a timpiece and smart technology to track user activity, sleep and stress and provides
         insights on daily wellness.
         
__4. Spring__: A water bottle that tracks daily water intake and is connected to the app to track hydration levels.

__5. Bellabeat Membership__: A subscription-based membership program for users which offers guidance on having a healthy lifesyle.

Bellabeat has invested in traditional advertising media like radio, billboards, print and television. In additon to this, thye have invested year-round in google search and run ads on youtube. They have good engagement with users on Twitter, Instagram and Facebook.

## Statement of Business Task

Urška Sršen, co-founder of Bellabeat believes analysis of Bellabeat's available consumer data can reveal more oppurtunities for growth. To gain insights on how smart devices are used, Sršen asks us to analyze smart device usage data of non-Bellabeat products and apply the findings to one Bellabeat prodcut.

> Key stakeholders

* __Urška Sršen__: Bellabeat’s cofounder and Chief Creative Officer
* __Sando Mur__: Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team
* __Bellabeat marketing analytics team__: A team of data analysts responsible for collecting, analyzing, and
reporting data that helps guide Bellabeat’s marketing strategy.

So the best thing to do is 

1. Investigate products similar to that of Bellabeat's and gain insights of their smart device usage

2. Find ways on how to apply these trends on Bellabeat products

3. Give recommendations based on the trends

***

## Data preparation

The dataset used in the analysis is [FitBit Fitness Tracker Data](https://www.kaggle.com/arashnic/fitbit).

It is a Kaggle data set which This Kaggle data set contains personal fitness tracker from thirty fitbit users. Thirty eligible Fitbit users consented to the submission of personal tracker data which includes activily level, calories burnt, sleep time and weight login info which will help us to examine users habits.

This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. 

The dataset includes 18 csv (comma seperated values) files.

On further inspection, the datasets were found to be in a combination of long format and wide format.

> RoCCC Analysis of dataset

Let's see how the dataset performs according to the following parameters:

* __Reliability__: Not really reliable as datasets consists of only 30 people which is a low sample size. Gender, age, location and occupation of the people are not known.

* __Originiality__: Obtained from a third-party source. Not original.

* __Comprehensive__: Dataset has multiple columns covering different areas like intensity, activity, calories etc. Quite comprehensive.

* __Current__: This is a dataset from 2016, 6 years ago. Even though there is no major change in our walking habits, the impact of Covid-19 is ignored.

* __Cited__: The data is well documented and cited. The one who has provided data, [Möbius](https://www.kaggle.com/arashnic) is also mentioned.

There is no bias in the data collected as people consented to applying for the survey.

> Files used from the dataset for analysis

1. dailyActivity_merged.csv
2. dailyCalories_merged.csv
3. dailyIntensities_merged.csv
4. dailySteps_merged.csv
5. sleepDay_merged.csv
6. weightLogInfo_merged.csv

R Studio is used for the data preparation. 

First by installing the various packages and loading them.

```{r}
install.packages("tidyverse", repos = "http://cran.us.r-project.org")
install.packages('dplyr', repos = "http://cran.us.r-project.org")
install.packages('ggplot2', repos = "http://cran.us.r-project.org")
install.packages('tidyr', repos = "http://cran.us.r-project.org")
install.packages('stringr', repos = "http://cran.us.r-project.org")

library(ggplot2)
library(tidyverse)
library(readr)
library(stringr)
library(dplyr)
library(tidyr)
```

*** 

## Data processing

MS Excel and R Studio are used for Data processing.

Basic cleaning was done on MS Excel removing empty data.

Then we imported the csv files to R Studio using read_csv

```{r}

dailyActivity_merged <- read_csv("C:/Users/vedan/Desktop/Bellabeat/Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")

dailyCalories_merged <- read_csv("C:/Users/vedan/Desktop/Bellabeat/Fitabase Data 4.12.16-5.12.16/dailyCalories_merged.csv")

dailySteps_merged <- read_csv("C:/Users/vedan/Desktop/Bellabeat/Fitabase Data 4.12.16-5.12.16/dailySteps_merged.csv")

dailyIntensities_merged <- read.csv("C:/Users/vedan/Desktop/Bellabeat/Fitabase Data 4.12.16-5.12.16/dailyIntensities_merged.csv")

sleepDay_merged <- read.csv("C:/Users/vedan/Desktop/Bellabeat/Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")

weightLogInfo_merged <- read.csv("C:/Users/vedan/Desktop/Bellabeat/Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
```

> Viewing the data
  The datasets imported can bew viewed using the view function. Also, to avoid loading all record, head function can be used.
  
```{r}
head(dailyActivity_merged)
```
  
```{r}
head(dailyCalories_merged)
```
  
```{r}
head(dailySteps_merged)
```

```{r}
head(dailyIntensities_merged)
```

```{r}
head(sleepDay_merged)
```

```{r}
head(weightLogInfo_merged)
```

> Data Integrity
  
  The selected datasets are checked and each of them have a common field Id.
  To maintain data integrity, the following piece of code involving length and unique function is run to check distinct values of id.
  
```{r}
length(unique(dailyActivity_merged$Id))
```

```{r}
length(unique(dailyCalories_merged$Id))

```
  
```{r}
length(unique(dailySteps_merged$Id))
```

```{r}
length(unique(dailyIntensities_merged$Id))
```

```{r}
length(unique(sleepDay_merged$Id))
```

```{r}
length(unique(weightLogInfo_merged$Id))
```

We can see the data in sleepDay_merged and weightLogInfo_merged have only 24 and 8 unique IDs in comparison to 33 of other tables. These missing values can effect the analysis.

***

## Data Analysis

The analysis tool used again is R Studio.

> Observed trends
The following hypothesis can be made with the data available among various tables

1. Relation between total distance and calories.

2. Relation between total distance and total steps.

3. Relation between Activity minutes and calories.

4. Relation between Time spent in bed and calories.

5. Relation between Activity minutes and BMI.

6. Relation between sleeping minutes and Non-active minutes.

>Organising and Formatting the data
.
Now the tables sleepDay_merged as well as  weightInfoLogin_merged has Date recorded in Date + Time format. So using the separate function, we have created a new dataframe "sleepDay_new" where the Sleepday column is divided into two separate columns:ActivityDay and Time.

```{r}
sleepDay_new <- sleepDay_merged %>% separate(SleepDay,c("ActivityDay", "Time"), sep=" ")
head(sleepDay_new)
```

Similarly, a new dataframe "weightLogInfo_new" is also created where the date column is divided into two separate columns: ActivityDate and Time

```{r}
weightLogInfo_new <- weightLogInfo_merged %>% separate(Date,c("ActivityDate", "Time"), sep=" ")
head(weightLogInfo_new)
```

It can be seen the columns are divided in the tables. 

> Data Aggregation

To analyze Time spent in bed and calories, the tables dailyActivity_merged and sleepDay_new can be merged with Id and ActivityDay column to form a new data frame "sleep_calories".

```{r}
sleep_calories <-merge.data.frame(dailyCalories_merged, sleepDay_new, by = c("Id", "ActivityDay"))
head(sleep_calories)
```

Also, for the Activity minutes and BMI, the tables dailyActivity_merged and weightLogInfo_new can be merged to give the new data frame "activity_weight".

```{r}
activity_weight <-merge.data.frame(dailyActivity_merged, weightLogInfo_new, by = c("Id", "ActivityDate"))
head(activity_weight)

```

Also to see the relation of sleep quality we need to merge sleepDay_new and dailyIntensities_merged

```{r}
sleeprelation <- merge.data.frame(dailyIntensities_merged, sleepDay_new, by=c("Id", "ActivityDay"))
```

Relation between sedentary minutes(non-active minutes) and BMI can be found. Notice that there is no Total active minutes, but only lightly, fairly and very active minutes, whose sum is actually total active minutes. So a column is added to the dataframe by summing the VeryActiveMinutes, FairlyActiveMinutes and LightlyActiveMinutes.

```{r}

activity_weight$TotalActiveMinutes <- activity_weight$VeryActiveMinutes+activity_weight$FairlyActiveMinutes+activity_weight$LightlyActiveMinutes
head(activity_weight)
```

The data has been analysed. All possible trends and relations have been investigated.

*** 

## Sharing the data

For visualising the data, R Studio is used.

ggplot is used for visualising data.

> Total Steps v/s Total Distance

```{r}
ggplot(data=dailyActivity_merged)+ 
  geom_point(mapping=aes(x=TotalDistance, y=TotalSteps), color="brown")+
  geom_smooth(mapping=aes(x=TotalDistance, y=TotalSteps), color="black",method="lm")+
  ggtitle("Total Steps v/s Total Distance (in km)")
```

We can see the total steps and total distance have a direct positive relation, i.e if you covering more distance you are walking more and more the number of steps.

>  Calories v/s Total Distance

```{r}
ggplot(data=dailyActivity_merged)+ 
  geom_point(mapping=aes(x=TotalDistance, y= Calories), color="steelblue")+
  geom_smooth(mapping=aes(x=TotalDistance, y=Calories), color="black",  method="lm")+
  ggtitle("Calories v/s Total Distance (in km)")
```

Here also a direct positive relation is found, i.e if you are covering more distance, higher the number of calories you will burn.

> Calories v/s Total Steps

```{r}
ggplot(data=dailyActivity_merged)+
  geom_point(mapping=aes(x=TotalSteps, y=Calories), color="#265c41")+
  geom_smooth(mapping=aes(x=TotalSteps, y=Calories), color="black",  method="lm")+
  ggtitle("Calories v/s Total Steps")
```

A direct positive relation is found here too i.e more steps you take, higher the number of calories you will burn.

This was expected as we have already seen the direct relation between total steps and total distance.

> Calories v/s Activity minutes

1. Calories v/s Sedentary Minutes

```{r}
  ggplot(data=dailyActivity_merged)+
  geom_point(mapping=aes(x=SedentaryMinutes, y= Calories), color="#5eb502")+
  geom_smooth(mapping=aes(x=SedentaryMinutes, y= Calories), color="black",method="lm")+
  ggtitle(" Calories v/s Sedentary Minutes")
```

We can see there is a small decrease in calories burnt more the amount of sedentary/ non-active minutes.
2. Calories v/s Lightly Active Minutes

```{r}
ggplot(data=dailyActivity_merged)+
  geom_point(mapping=aes(x=LightlyActiveMinutes, y= Calories), color="#ba9200")+
  geom_smooth(mapping=aes(x=LightlyActiveMinutes, y= Calories), color="black",method="lm")+
  ggtitle("Calories v/s Lightly Active Minutes")
```

3. Calories v/s Fairly Active Minutes

```{r}
ggplot(data=dailyActivity_merged)+
  geom_point(mapping=aes(x=FairlyActiveMinutes, y= Calories), color="#f79d00")+
  geom_smooth(mapping=aes(x=FairlyActiveMinutes, y= Calories), color="black",method="lm")+
  ggtitle("Calories v/s Fairly Active Minutes")
```

4. Calories v/s Very Active Minutes

```{r}
ggplot(data=dailyActivity_merged)+
  geom_point(mapping=aes(x=VeryActiveMinutes, y= Calories), color="#ff1c33")+
  geom_smooth(mapping=aes(x=VeryActiveMinutes, y= Calories), color="black", method="lm")+
  ggtitle("Calories v/s Very Active Minutes")
```

5. 

```{r}
ggplot(data=dailyActivity_merged)+
  geom_smooth(mapping=aes(x=LightlyActiveMinutes, y= Calories), color="#c7c700",method="lm")+
  geom_smooth(mapping=aes(x=FairlyActiveMinutes, y= Calories), color="#c98308",method="lm")+
  geom_smooth(mapping=aes(x=VeryActiveMinutes, y= Calories), color="#ba3009", method="lm")+
  labs(y="Calories", x="Activity Minutes")+
  annotate(geom="text", x=400, y=2500, label="Lightly Active",color="#c7c700")+
  annotate(geom="text", x=150, y=3000, label="Fairly Active", color="Orange" )+
  annotate(geom="text", x=100, y=4000, label="Very Active", color="red")+
  ggtitle(" Comparison of Calories with differen activity minutes")
```

Calories burnt has a positve relation with Activity minutes. 

We can see a trend here.

The value of the slope increase with increasing intensity of activity minutes. That means more calories are burnt when you are very active than when you are fairly active which in turn is more than lightly active for the same amount of time.

> Calories v/s Total time in bed

```{r}
ggplot(data=sleep_calories)+
  geom_point(mapping=aes(x=TotalTimeInBed, y=Calories), color="navyblue")+
  geom_smooth(mapping=aes(x=TotalTimeInBed, y=Calories), color="black", method="lm")
```

It can be observed, more time you spend in bed, lesser calories you burn.

> BMI v/s Non-Activity Minutes

```{r}
ggplot(data=activity_weight)+
  geom_point(mapping=aes(x=SedentaryMinutes, y=BMI, size=BMI), color="#4d2b8c")+
  geom_smooth(mapping=aes(x=SedentaryMinutes, y=BMI), color="Black", method="lm")
```

A person having a larger BMI has more non-activity minutes.

> BMI v/s Total-Activity Minutes

```{r}
ggplot(data=activity_weight)+
  geom_point(mapping=aes(x=TotalActiveMinutes, y=BMI, size=BMI), color="#4d2b8c")+
  geom_smooth(mapping=aes(x=TotalActiveMinutes, y=BMI), color="Black", method="lm")
```

A person having a larger BMI has less activity minutes.

> Sleep Relation

```{r}
ggplot(data=sleeprelation)+
  geom_point(mapping=aes(x=SedentaryMinutes, y=TotalMinutesAsleep), color = "green")+
  geom_smooth(mapping=aes(x=SedentaryMinutes, y=TotalMinutesAsleep), color="Black", method="lm")+
    labs(y="Total Minutes Asleep", x="Non-Activity Minutes")+
  ggtitle("Sleep Relation")
```

There is a negative relation which indicates the higher non-active minutes can lead to lesser sleep minutes, which indicates deterioration in sleeping level.

(NOTE: The above two results have a very small sample size)


## Acting on the data

> Trends and Relations

From the above analysis we can establish the following relations.

  1. Great distance travelled means more steps taken and higher amount of calories burnt.

  2. Greater active minutes leads to higher amount of calories burnt.

  3. People who are not really active have an unhealthy lifestyle with lesser sleep amount and high BMI.

  4. People who burn low calories tend to spend more time on bed.

> Recommendations to expand business

  1. Target members should be people who have lower active minutes and higher sedentary minutes. 
 
  2.Timely alerts and reminders can be given to motivate them.

  3. Can introduce a reward system on the app to encourage users to recommend to friends/family members. 

  4. A free trial for 2 weeks/ 4 weeks can be given to test the products.
  
  5. Can give personalised feedback according to each one's BMI and activity levels.
  
>  Recommendations for Bellabeat products

  1. The trackers i.e Leaf and Time should be advertised more which should include its benefits.

  2. With very minimal to no data on hydration levels, production of Spring can be reduced.
  
  3. For memberships, referrals from person to person can be given an initial discount.


